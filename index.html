<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
    <title>Discord Bot Documentation</title>
  </head>
  <body>
    <nav>
      <h1><a href="#welcome">Discord Bot Documentation</a></h1>
      <hr />

      <p><a href="#set-up-a-local-instance">Local Instance</a></p>
      <p><a href="#clone-the-github-repository">Clone Repository</a></p>
      <p><a href="#install-the-necessary-software">Install Software</a></p>
      <hr />
      <p>
        <a
          href="#creating-your-bot-application-and-connecting-it-to-your-instance"
          >Create a Discord Bot</a
        >
      </p>
      <p>
        <a href="#link-your-bot-to-the-code">Connect this code to your Bot</a>
      </p>
      <p><a href="#configure-your-bot">Adjust the Settings</a></p>
      <p><a href="#try-to-run-the-bot">Run the Bot</a></p>
      <p><a href="#host-a-live-version-of-the-bot">Host the Bot</a></p>
      <hr />
      <p><a href="#bot-features">Bot Features</a></p>
      <p><a href="#automatic-commands">Automatic Messages</a></p>
      <p><a href="#manual-commands">Manual Commands</a></p>
      <hr />
      <p><a href="#known-issues">Known Issues</a></p>
      <hr />
      <p><a href="https://www.nhcarrigan.com">&copy; Nicholas Carrigan</a></p>
    </nav>

    <main>
      <section id="welcome">
        <h1>Welcome!</h1>
        <p>
          This is the documentation for our Discord Bot. A live version of the
          bot can be found in our
          <a href="https://discord.gg/PHqDbkg" target="_blank"
            >Discord Server</a
          >
          Here you will find instructions for setting up a local version of the
          bot, contributing to the bot's development, adding the bot to your
          Discord server, and using the bot's commands.
        </p>
        <p>
          As the bot is always considered a work in progress, these documents
          will be updated alongside new versions of the bot. Should there be a
          discrepancy between the two, feel free to let us know with an issue
          request on GitHub!
        </p>
        <p>The bot's current version is 1.26.1</p>
      </section>

      <section id="local">
        <h1>Set up a Local Instance</h1>
        <p>
          There are a few steps you will need in order to set up a local
          instance of the bot. You will need some knowledge of JavaScript, node,
          and git. If you are not comfortable with doing this, you can
          <a href="#host-a-live-version-of-the-bot">use our live bot</a>.
        </p>
      </section>

      <section id="local_github">
        <h2>Clone the GitHub Repository</h2>
        <p>
          Before doing anything else, you have to make sure you have a GitHub
          Account. If you do not have one, we recommend signing up for free
          <a href="https://github.com/join">here</a>.
        </p>
        <p>
          Once you have signed in to GitHub, navigate to our
          <a href="https://github.com/nhcarrigan/discord-bot" target="_blank"
            >Discord Bot repository</a
          >
          and either fork the repository into your own account or download the
          files to your computer.
        </p>
      </section>

      <section id="local_software">
        <h2>Install the Necessary Software</h2>
        <p>
          Using your preferred development environment (if you do not have one,
          we recommend either
          <a href="https://code.visualstudio.com/"
            >Visual Studio Code (VSCode)</a
          >
          or <a href="https://atom.io/" target="_blank">Atom</a>), load the
          directory containing your copy of the bot files.
        </p>

        <p>
          Before you do anything else, make sure that Node.js and npm is
          installed. If you do not have Node.js and `npm` installed, you can do
          so from the
          <a href="https://nodejs.org/en/docs/" target="_blank"
            >Node.js website</a
          >. Open the terminal - you will now need to install some packages
          using `npm`. Enter the following commands into the terminal to perform
          the installations:
        </p>
        <ul>
          <li>
            `npm install discord.js` - This installs
            <a href="https://discord.js.org/" target="_blank">Discord.js</a>,
            the library that runs the bot.
          </li>
          <li>
            `npm install dotenv` - This installs
            <a href="https://www.npmjs.com/package/dotenv" target="_blank"
              >DotEnv</a
            >, the library that allows the .env file to function.
          </li>
          <li>
            `npm install mtgsdk` - This installs
            <a href="https://docs.magicthegathering.io/" target="_blank"
              >the MTG SDK</a
            >, which connects to the Magic: The Gathering API.
          </li>
          <li>
            `npm install node-fetch` - This installs
            <a href="https://www.npmjs.com/package/node-fetch" target="_blank"
              >Node-Fetch</a
            >, which adds a fetch function for the Pokemon API commands.
          </li>
          <li>
            `npm install mongodb` - This installs
            <a href="https://www.mongodb.com/" target="_blank">MongoDB</a>, the
            database platform for the levelling system.
          </li>
          <li>
            `npm install mongoose` - This installs
            <a href="https://mongoosejs.com/docs/" target="_blank">Mongoose</a>,
            which manages the database entries.
          </li>
        </ul>
        <p>
          <em>
            (Alternatively, you can run `npm install` from the code directory to
            install all dependencies listed in the `package.json` file.)
          </em>
        </p>
        <p>
          Congratulations! You are now ready to run the code locally - the start
          command is `npm ./commands/main.js`. To connect the code to your
          Discord Bot application, continue reading below.
        </p>
      </section>

      <section id="bot">
        <h1>
          Creating Your Bot Application and Connecting it to Your Instance
        </h1>
        <p>
          Now that you are able to run the code, you need to connect the code to
          a Discord Bot application. If you have not created a Discord Bot
          application, you will need to follow these steps:
        </p>
        <ul>
          <li>
            Log in to the
            <a
              href="https://discord.com/developers/applications"
              target="_blank"
              >Discord Developer site</a
            >
          </li>
          <li>
            Create a new application by clicking on the "New Application"
            button.
          </li>
          <li>On the left, select "Bot", then create a new bot.</li>
        </ul>
      </section>

      <section id="bot_connect">
        <h2>Link your Bot to the Code</h2>
        <p>
          Now that you have a bot, you'll need to create a file called `.env`.
          This file will contain two variables:
        </p>
        <ul>
          <li>
            `DISCORD_TOKEN` - The value of this variable will be your Bot Token
            from the Discord developer page. It is VERY important that you keep
            this token a secret - do not upload it to GitHub or share it
            publically, as this will allow anyone to access your discord bot.
          </li>
          <li>
            `MONGO_URI` - The value of this variable will be your MongoDB
            authentication URI. Like the bot token, this needs to be kept secret
            to prevent unauthorised access to and modification of your database.
          </li>
        </ul>
      </section>

      <section id="bot_config">
        <h2>Configure your Bot</h2>
        <p>
          The code contains a `config.json` file which is used to modify the
          bot's options. The first option, `prefix`, determines what symbol the
          bot looks for to trigger a command. The default is the pipe symbol
          `|`, but you may change this to whatever you wish.
        </p>
        <p>
          The next option is the `log_channel` option, which determines the name
          of the channel where the bot should log things like deleted messages,
          and kick/ban instances.
        </p>
        <p>
          The `join_leave_channel` option allows you to set the name of the
          channel for user welcome/depart messages.
        </p>
        <p>
          The `silence_role` option sets the name of the Discord role your
          server uses to restrict a user's ability to send messages.
        </p>
        <p>
          The `silence_category` option sets the name of the channel category
          where the bot should create suspended user channels.
        </p>
      </section>

      <section id="bot_run">
        <h2>Try to Run the Bot</h2>
        <p>
          The next step is to invite your bot application to your server. You
          can use the Discord Developer portal to generate an invitation link,
          or you can use the Client ID from your bot's application page to
          create a link yourself. If you wish to manually create the link, the
          format is
        </p>
        <pre><code
				>https://discord.com/oauth2/authorize?client_id=CLIENTIDHERE&scope=bot</code
			></pre>
        <p>
          Regardless of which method you choose, the link will open a new window
          allowing you to choose which server you'd like to add your bot to.
        </p>
        <p>
          Once you have added the bot to your server, switch back to your
          terminal and run the command `node ./commands/main.js`. If you have
          set the `join_leave_channel` in your `config.json` appropriately, the
          bot should send a message indicating it is online. Otherwise, you
          should see the text `Activate the Omega!` in your terminal, indicating
          your bot is online! Now you can try some of the commands to see if the
          bot is functioning correctly.
        </p>
      </section>

      <section id="bot_live">
        <h2>Host a Live Version of the Bot</h2>
        <p>
          By now you should have a successfully running local instance of the
          bot. Keeping this alive means you cannot shut down your computer. As
          an alternative, you might want to use a hosting service to run a live
          instance of your bot. We use Heroku for our version, but there are
          other options. Be sure to read the documentation for your chosen
          platform! Heroku, for example, uses a separate setting for the bot
          token instead of a `.env` file.
        </p>
        <p>
          If you would like to add our live bot to your server, you are welcome
          to
          <a href="https://contact.nhcarrigan.com" target="_blank">contact us</a
          >, but we are not able to fulfill every request as the hosting
          platform will only allow so much server load.
        </p>
      </section>

      <section id="cmd">
        <h1>Bot Features</h1>
        <p>
          The bot has multiple features on offer. Some of them are automatic,
          but most of them require the user to send a command word. The command
          words are listed below, but must be prefaced with the `prefix` symbol
          set in the `config.json` settings.
        </p>
      </section>

      <section id="cmd_auto">
        <h2>Automatic Commands</h2>
        <p>
          There are a few messages that the bot will automatically send when
          certain conditions are met.
        </p>
        <ul>
          <li>
            `Welcome Messages` - The bot will send a welcome message directly to
            a new user in the form of an embed. This message details how to use
            the bot's command and what the command prefix is. Additionally, if a
            valid channel is provided for the `join_leave_channel` setting, the
            bot will send a message to the channel inviting the user to
            introduce themselves.
          </li>
          <li>
            `Depart Messages` - If a valid channel is provided for the
            `join_leave_channel` setting, the bot will send a message to that
            channel notifying the server when a user has left.
          </li>
          <li>
            `Deleted Message Log` - If a valid channel is provided for the
            `log_channel` setting, the bot will send an embed message to that
            channel when someone deletes a message. The embed will contain the
            deleted message's author and content.
          </li>
          <li>
            `Levelling System` - The bot listens to each message and gives
            experience points to the message author. The values are stored in a
            MongoDB database, and the bot sends a level up message at every
            100xp increment.
          </li>
          <li>
            `Command Usage Tracking` - The bot logs each command that is called
            and keeps a record of the number of calls for each command. The
            values are stored in a MongoDB database.
          </li>
        </ul>
      </section>

      <section id="cmd_man">
        <h2>Manual Commands</h2>
        <p>
          These commands are run manually by sending the prefix and the
          associated command keyword (listed below) and arguments.
        </p>
        <ul>
          <li>
            `about` - This command generates an embed message that provides a
            link to the bot source code, the date the bot was created, the
            number of commands the bot can perform, and the bot's favourite
            colour. The embed is sent to the channel the command message came
            from.
          </li>
          <li>
            `ban [@username] [reason(optional)]` - This command requires that
            the user sending it has the "Ban Members" permission. If the
            permission is missing, the bot responds with a notice that the user
            lacks permission. Otherwise, the command bans [@username] from the
            server. If the `log_channel` option is set, the bot will send an
            embed to that channel. The embed will contain the name of the user
            performing the ban, the name of the banned user, and the reason
            provided. If no reason was provided, the embed will state that.
            Because of the permanent nature of bans, the bot will require
            confirmation before taking action.
          </li>
          <li>
            `cat` - This command sends a random string of letters of a random
            length, to simulate a cat walking across your keyboard.
          </li>
          <li>
            `close` - This command requires the user to have the "Kick Members"
            permission. If the permission is missing, the bot responds with a
            notice that the user lacks permission to use this command.
            Otherwise, the bot deletes the channel this command is used in, and
            logs the deletion to the `log_channel` option.
          </li>
          <li>
            `fortune` - This command will send a message to the channel the
            command came from. The message will contain a random fortune cookie
            quote from the list provided in the bot code.
          </li>
          <li>
            `help` - This command sends an embed to the user. The embed contains
            a few selected commands, and a link to this documentation for the
            full list of commands. Additionally, the bot will send a message to
            the channel the command came from, to confirm the embed was sent to
            the user.
          </li>
          <li>
            `kick [@username] [reason(optional)]` - This command requires that
            the user sending it has the "Kick Members" permission. If the
            permission is missing, the bot responds with a notice that the user
            lacks permission. Otherwise, the command kicks [@username] from the
            server. If the `log_channel` option is set, the bot will send an
            embed to that channel. The embed will contain the name of the user
            performing the kick, the name of the kicked user, and the reason
            provided. If no reason was provided, the embed will state that.
          </li>
          <li>
            `kirby` - This command sends a message to the channel the command
            came from. The message contains Kirby doing a little dance.
          </li>
          <li>
            `level` - This command sends an embed containing the user's
            experience points and current level.
          </li>
          <li>
            `magic [cardname]` - This command querys the Magic: The Gathering
            API for cards that match [cardname]. The bot will send a message to
            the channel the message contains to confirm the command was received
            and the search was started. For each card it finds, the bot sends an
            embed containing the card information. The bot sends a notification
            after 30 seconds, when the search is complete. NOTE: The API can be
            slow to respond so this command may take some time.
          </li>
          <li>
            `ping` - This command will generate the latency for the bot. The bot
            will send a response back with the communication time in
            milliseconds.
          </li>
          <li>
            `pokename [name]` - This command querys the Pokemon API. If the bot
            finds a Pokemon that matches the name provided, it will send an
            embed containing the Pokemon's name, number, and image. If the bot
            cannot find a Pokemon, it will send a message notice.
          </li>
          <li>
            `pokenum [number]` - This command querys the Pokemon API. If the bot
            finds a Pokemon that matches the number provided, it will send an
            embed containing the Pokemon's name, number, and image. If no
            Pokemon is found, the bot will send a message notice. As an
            alternative, sending "random" instead of a number will cause the bot
            to return a random Pokemon.
          </li>
          <li>
            `profile [website] [username]` - This command will return a message
            embed containing a link to the profile for [username] on the
            [website]. Currently supported websites are: Steam, Facebook,
            Github, Twitter, LinkedIn, and Instagram. If an invalid website is
            sent, the bot will send a message notification stating the website
            is not available.
          </li>
          <li>
            `purge [number]` - This command will delete [number] messages from
            the channel the command is sent to. The bot will send a message to
            confirm deletion, then delete that message as well. If the user
            tries to delete more than 100 messages at once, the bot will refuse
            as Discord limitations currently prevent bots from deleting more
            than 100 messages at a time.
          </li>
          <li>
            `restrict [@username] [reason(optional)]` This command requires that
            the user sending it has the "Kick Members" permission. If the
            permission is missing, the bot responds with a notice that the user
            lacks permission. Otherwise, the command will set the [@username]'s
            role provided in the `silence_role` option, and remove all other
            roles. If the role option is not set, the bot will send a message to
            notify the user. If the `log_channel` option is not set, the bot
            will send a message to notify the user. Otherwise, the bot will send
            an embed to the log channel. The embed will contain the name of the
            user performing the command, the name of the restricted user, and
            the reason provided. If no reason was provided, the embed will state
            that. The bot will then create a channel under the
            `silence_category` category (if `silence_category` is not set, the
            bot will send a message to notify the user), which only the channel
            moderators and the restricted user can access.
          </li>
          <li>
            `roll d[number]` - This command returns a random number between 1
            and [number], as if it was a dice roll.
          </li>
          <li>
            `search [query]` - This command returns a URL to the Google search
            results page for the given [query] word or words.
          </li>
          <li>
            `star [@username] [reason(optional)]` - This command sends a message
            embed to the [@username]'s direct messages. The embed contains the
            command author's name, the [reason] if provided, and a shiny gold
            star!
          </li>
          <li>
            `status` - This command returns a message embed containing
            information about the current server. The information includes the
            server name, creation date, the user's join date, the server owner,
            and the member count.
          </li>
          <li>
            `unrestrict [@username] [reason(optional)]` - This command requires
            that the user sending it has the "Kick Members" permission. If the
            permission is missing, the bot responds with a notice that the user
            lacks permission. Otherwise, the command will remove the
            [@username]'s role provided in the `silence_role` option. If the
            role option is not set, the bot will send a message to notify the
            user. If the `log_channel` option is set, the bot will send an embed
            to that channel. The embed will contain the name of the user
            performing the command, the name of the unrestricted user, and the
            reason provided. If no reason was provided, the embed will state
            that.
          </li>
          <li>
            `usage [command]` - This command returns a message embed for the
            [command]. The embed will contain the number of times the command is
            called.
          </li>
          <li>
            `user [@username]` - This command returns a message embed about
            [@username]. The embed contains their nickname, full username,
            account creation date, online status, date they joined the server,
            roles they have, and their avatar.
          </li>
          <li>
            `warn [@username] [reason(optional)]` - This command requires that
            the user sending it has the "Kick Members" permission. If the
            permission is missing, the bot responds with a notice that the user
            lacks permission. Otherwise, the command will send a direct message
            to [@username] informing them that the command author has warned
            them, and providing the reason if given. If the `log_channel` option
            is set, the bot will send an embed to that channel. The embed will
            contain the name of the user performing the warning, the name of the
            warned user, and the reason provided. If no reason was provided, the
            embed will state that.
          </li>
          <li>
            `wiki [query]` - This command returns a link to the wikipedia
            article for [query]. If the article is not found, it returns the
            search page instead.
          </li>
        </ul>
      </section>

      <section id="trouble">
        <h1>Known Issues</h1>

        <div class="trouble-container">
          <h2>My bot won't connect!</h2>
          <p>
            Make sure you have properly set up the `.env` file to contain a
            `DISCORD_TOKEN` variable set to your bot's token.
          </p>
          <h2>I can't get my bot in my server</h2>
          <p>
            Make sure you are generating the invite link correctly, and that you
            have "Manage Server" permissions for the server you are trying to
            add the bot to.
          </p>
          <h2>My bot isn't doing a certain command!</h2>
          <p>
            Make sure your bot has the appropriate permissions in the server.
            For best results, set the bot to an Administrator.
          </p>
          <h2>Other Issues?</h2>
          <p>
            If you are having another issue, you can create a
            <a href="https://github.com/nhcarrigan/discord-bot" target="_blank"
              >bug report</a
            >
            or
            <a href="https://contact.nhcarrigan.com" target="_blank"
              >contact me directly</a
            >.
          </p>
        </div>
      </section>
    </main>

    <script src="main.js"></script>
  </body>
</html>
