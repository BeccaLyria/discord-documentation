<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
    <title>Discord Bot Documentation</title>
  </head>
  <body>
    <nav>
      <h1><a href="#welcome">Discord Bot Documentation</a></h1>
      <hr />

      <p><a href="#set-up-a-local-instance">Local Instance</a></p>
      <p><a href="#clone-the-github-repository">Clone Repository</a></p>
      <p><a href="#install-the-necessary-software">Install Software</a></p>
      <hr />
      <p>
        <a
          href="#creating-your-bot-application-and-connecting-it-to-your-instance"
          >Create a Discord Bot</a
        >
      </p>
      <p>
        <a href="#link-your-bot-to-the-code">Connect this code to your Bot</a>
      </p>
      <p><a href="#configure-your-bot">Adjust the Settings</a></p>
      <p><a href="#try-to-run-the-bot">Run the Bot</a></p>
      <p><a href="#host-a-live-version-of-the-bot">Host the Bot</a></p>
      <hr />
      <p><a href="#bot-features">Bot Features</a></p>
      <p><a href="#automatic-commands">Automatic Messages</a></p>
      <p><a href="#manual-commands">Manual Commands</a></p>
      <hr />
      <p><a href="#contributing-to-the-bot">Contributing to the Bot</a></p>
      <p><a href="#known-issues">Known Issues</a></p>
      <hr />
      <p>
        <a
          href="https://www.nhcarrigan.com"
          target="_blank"
          rel="noopener noreferrer"
          >&copy; Nicholas Carrigan</a
        >
      </p>
    </nav>

    <main>
      <section id="welcome">
        <h1>Welcome!</h1>
        <p>
          This is the documentation for our Discord Bot. A live version of the
          bot can be found in our
          <a
            href="https://discord.gg/PHqDbkg"
            target="_blank"
            rel="noopener noreferrer"
            >Discord Server</a
          >
          Here you will find instructions for setting up a local version of the
          bot, contributing to the bot's development, adding the bot to your
          Discord server, and using the bot's commands.
        </p>
        <p>
          As the bot is always considered a work in progress, these documents
          will be updated alongside new versions of the bot. Should there be a
          discrepancy between the two, feel free to let us know with an issue
          request on GitHub!
        </p>
        <p>The bot's current version is 4.6.0</p>
      </section>

      <section id="local">
        <h1>Set up a Local Instance</h1>
        <p>
          There are a few steps you will need in order to set up a local
          instance of the bot. You will need some knowledge of JavaScript,
          TypeScript, node, and git. If you are not comfortable with doing this,
          you can
          <a href="#host-a-live-version-of-the-bot">use our live bot</a>.
        </p>
      </section>

      <section id="local_github">
        <h2>Clone the GitHub Repository</h2>
        <p>
          Before doing anything else, you have to make sure you have a GitHub
          Account. If you do not have one, we recommend signing up for free
          <a href="https://github.com/join">here</a>.
        </p>
        <p>
          Once you have signed in to GitHub, navigate to our
          <a
            href="https://github.com/nhcarrigan/discord-bot"
            target="_blank"
            rel="noopener noreferrer"
            >Discord Bot repository</a
          >
          and either fork the repository into your own account or download the
          files to your computer.
        </p>
      </section>

      <section id="local_software">
        <h2>Install the Necessary Software</h2>
        <p>
          Using your preferred development environment (if you do not have one,
          we recommend either
          <a href="https://code.visualstudio.com/"
            >Visual Studio Code (VSCode)</a
          >
          or
          <a href="https://atom.io/" target="_blank" rel="noopener noreferrer"
            >Atom</a
          >), load the directory containing your copy of the bot files.
        </p>

        <p>
          Before you do anything else, make sure that Node.js and npm is
          installed. If you do not have Node.js and `npm` installed, you can do
          so from the
          <a
            href="https://nodejs.org/en/docs/"
            target="_blank"
            rel="noopener noreferrer"
            >Node.js website</a
          >. Open the terminal - you will now need to install some packages
          using `npm`. Enter the following commands into the terminal to perform
          the installations:
        </p>
        <p>
          <em>
            `npm install` - This will install all of the dependencies found in
            the `package.json` file automatically. If this does not work, you
            will need to go through each item listed in that file and run `npm
            install [packagename]`
          </em>
        </p>
        <p>
          `npm run build` - This will build the TypeScript files into runnable
          JavaScript files.
        </p>
        <p>
          Congratulations! You are now ready to run the code locally - the start
          command is `npm run start`. To connect the code to your Discord Bot
          application, continue reading below.
        </p>
      </section>

      <section id="bot">
        <h1>
          Creating Your Bot Application and Connecting it to Your Instance
        </h1>
        <p>
          Now that you are able to run the code, you need to connect the code to
          a Discord Bot application. If you have not created a Discord Bot
          application, you will need to follow these steps:
        </p>
        <ul>
          <li>
            Log in to the
            <a
              href="https://discord.com/developers/applications"
              target="_blank"
              rel="noopener noreferrer"
              >Discord Developer site</a
            >
          </li>
          <li>
            Create a new application by clicking on the "New Application"
            button.
          </li>
          <li>On the left, select "Bot", then create a new bot.</li>
        </ul>
        <h2>Create a Webhook</h2>
        <p>
          The bot is configured to send an online notice, and updates on servers
          it leaves or joins, through a Discord Webhook. In your server, create
          a new Webhook and copy the URL. You will need the ID and Token from
          that URL for the next step.
        </p>
      </section>

      <section id="bot_connect">
        <h2>Link your Bot to the Code</h2>
        <p>
          Now that you have a bot, you'll need to create a file called `.env`.
          This file will contain the following variables:
        </p>
        <ul>
          <li>
            `DISCORD_TOKEN` - The value of this variable will be your Bot Token
            from the Discord developer page. It is VERY important that you keep
            this token a secret - do not upload it to GitHub or share it
            publically, as this will allow anyone to access your discord bot.
          </li>
          <li>
            `HP_KEY` - This is the API key for the
            <a
              href="https://www.potterapi.com/"
              target="_blank"
              rel="noopener noreferrer"
              >Harry Potter API.</a
            >
          </li>
          <li>
            `MONGO_URI` - The value of this variable will be your MongoDB
            authentication URI. Like the bot token, this needs to be kept secret
            to prevent unauthorised access to and modification of your database.
          </li>
          <li>
            `NASA_API` - This is the API key for the
            <a
              href="https://api.nasa.gov/"
              target="_blank"
              rel="noopener noreferrer"
              >NASA API.</a
            >
          </li>
          <li>
            `PRODDEV` - This tells the bot whether it is in a development state
            or production state - the webhook message includes this value.
          </li>
          <li>`WH_ID` - This is the ID for the Discord webhook.</li>
          <li>`WH_TOKEN` - This is the token for the Discord webhook.</li>
        </ul>
      </section>
      <section id="bot_config">
        <h2>Configure your Bot</h2>
        <p>
          The code contains a `config.json` file which is used to modify the
          bot's options. The first option, `prefix`, determines what symbol the
          bot looks for to trigger a command. The default is the pipe symbol
          `|`, but you may change this to whatever you wish.
        </p>
        <p>
          The next option is the `log_channel` option, which determines the name
          of the channel where the bot should log things like deleted messages,
          and kick/ban instances.
        </p>
        <p>
          The `join_leave_channel` option allows you to set the name of the
          channel for user welcome/depart messages.
        </p>
        <p>
          The `silence_role` option sets the name of the Discord role your
          server uses to restrict a user's ability to send messages.
        </p>
        <p>
          The `silence_category` option sets the name of the channel category
          where the bot should create suspended user channels.
        </p>
        <p>
          The `love` option sets the ID values for the Discord users whose
          messages the bot should automatically heart react.
        </p>
        <p>
          The `bot_role` option sets the name of the bot's role, to allow it to
          be added to the suspended user channels.
        </p>
      </section>

      <section id="bot_run">
        <h2>Try to Run the Bot</h2>
        <p>
          The next step is to invite your bot application to your server. You
          can use the Discord Developer portal to generate an invitation link,
          or you can use the Client ID from your bot's application page to
          create a link yourself. If you wish to manually create the link, the
          format is
        </p>
        <pre><code
				>https://discord.com/oauth2/authorize?client_id=CLIENTIDHERE&scope=bot</code
			></pre>
        <p>
          Regardless of which method you choose, the link will open a new window
          allowing you to choose which server you'd like to add your bot to.
        </p>
        <p>
          Once you have added the bot to your server, switch back to your
          terminal and run the command `node ./commands/main.js`. If you have
          set the `join_leave_channel` in your `config.json` appropriately, the
          bot should send a message indicating it is online. Otherwise, you
          should see the text `Activate the Omega!` in your terminal, indicating
          your bot is online! Now you can try some of the commands to see if the
          bot is functioning correctly.
        </p>
      </section>

      <section id="bot_live">
        <h2>Host a Live Version of the Bot</h2>
        <p>
          By now you should have a successfully running local instance of the
          bot. Keeping this alive means you cannot shut down your computer. As
          an alternative, you might want to use a hosting service to run a live
          instance of your bot. We use Heroku for our version, but there are
          other options. Be sure to read the documentation for your chosen
          platform! Heroku, for example, uses a separate setting for the bot
          token instead of a `.env` file.
        </p>
        <p>
          If you would like to add our live bot to your server, you are welcome
          to
          <a
            href="https://contact.nhcarrigan.com"
            target="_blank"
            rel="noopener noreferrer"
            >contact us</a
          >, but we are not able to fulfil every request as the hosting platform
          will only allow so much server load.
        </p>
      </section>

      <section id="cmd">
        <h1>Bot Features</h1>
        <p>
          The bot has multiple features on offer. Some of them are automatic,
          but most of them require the user to send a command word. The command
          words are listed below, but must be prefaced with the `prefix` symbol
          set in the `config.json` settings.
        </p>
      </section>

      <section id="cmd_auto">
        <h2>Automatic Commands</h2>
        <p>
          There are a few messages that the bot will automatically send when
          certain conditions are met.
        </p>
        <ul>
          <li>
            `Welcome Messages` - The bot will send a welcome message directly to
            a new user in the form of an embed. This message details how to use
            the bot's command and what the command prefix is. Additionally, if a
            valid channel is provided for the `join_leave_channel` setting, the
            bot will send a message to the channel inviting the user to
            introduce themselves.
          </li>
          <li>
            `Depart Messages` - If a valid channel is provided for the
            `join_leave_channel` setting, the bot will send a message to that
            channel notifying the server when a user has left.
          </li>
          <li>
            `Deleted Message Log` - If a valid channel is provided for the
            `log_channel` setting, the bot will send an embed message to that
            channel when someone deletes a message. The embed will contain the
            deleted message's author and content.
          </li>
          <li>
            `Levelling System` - The bot listens to each message and gives
            experience points to the message author. The values are stored in a
            MongoDB database, and the bot sends a level up message at every
            100xp increment.
          </li>
          <li>
            `Command Usage Tracking` - The bot logs each command that is called
            and keeps a record of the number of calls for each command. The
            values are stored in a MongoDB database.
          </li>
          <li>
            `Heart reactions` - The bot will check the ID of each message's
            author. If the ID is in the array provided in the `love` config
            setting, the bot will add a random heart react to the message.
          </li>
        </ul>
      </section>

      <section id="cmd_man">
        <h2>Manual Commands</h2>
        <p>
          These commands are run manually by sending the prefix and the
          associated command keyword (listed below) and arguments.
        </p>
        <ul>
          <li>
            `about` - This command generates an embed message that provides a
            link to the bot source code, the date the bot was created, the
            number of commands the bot can perform, and the bot's favourite
            colour. The embed is sent to the channel the command message came
            from.
          </li>
          <li>
            `ban [@username] [reason?]` - This command requires that the user
            sending it has the "Ban Members" permission. If the permission is
            missing, the bot responds with a notice that the user lacks
            permission. Otherwise, the command bans [@username] from the server.
            If the `log_channel` option is set, the bot will send an embed to
            that channel. The embed will contain the name of the user performing
            the ban, the name of the banned user, and the reason provided. If no
            reason was provided, the embed will state that. Because of the
            permanent nature of bans, the bot will require confirmation before
            taking action.
          </li>
          <li>
            `cat` - This command sends a random string of letters of a random
            length, to simulate a cat walking across your keyboard.
          </li>
          <li>
            `close` - This command requires the user to have the "Kick Members"
            permission. If the permission is missing, the bot responds with a
            notice that the user lacks permission to use this command.
            Otherwise, the bot deletes the channel this command is used in, and
            logs the deletion to the `log_channel` option.
          </li>
          <li>
            `compliment` - Provides a little compliment to cheer you up.
            Compliments obtained from freeCodeCamp.
          </li>
          <li>
            `dnd` - This command generates an embed containing the currently
            available Dungeons and Dragons commands.
          </li>
          <li>
            `dndclass [class]` - This command generates an embed containing
            information about the Dungeons and Dragons [class].
          </li>
          <li>
            `dndmon [monster]` - This command generates an embed containing
            information about the Dungeons and Dragons [monster].
          </li>
          <li>
            `dndrace [race]` - This command generates an embed containing
            information about the Dungeons and Dragons [race].
          </li>
          <li>
            `dndschool [school]` - This command generates an embed containing
            information about the Dungeons and Dragons [school] of magic.
          </li>
          <li>
            `dndspell [spell]` - This command generates an embed containing
            information about the Dungeons and Dragons [spell].
          </li>
          <li>
            `fortune` - This command will send a message to the channel the
            command came from. The message will contain a random fortune cookie
            quote from the list provided in the bot code.
          </li>
          <li>
            `guess` - This command starts a game of Guess the Number. The bot
            will generate a number between 1 and 1000. Players have ten seconds
            to submit guesses, then the bot will announce the winner based on
            the closest guess.
          </li>
          <li>
            `help [command?]` - This command returns an embed containing a list
            of available commands. If the optional [command] parameter is
            passed, the bot will return the description for that command (or an
            error, if that command does not exist).
          </li>
          <li>
            `hpchar [name]` - This command returns an embed containing
            information on the [name] Harry Potter character.
          </li>
          <li>
            `hpsort` - This command randomly sorts you into a Hogwarts house and
            returns an embed containing information on that house.
          </li>
          <li>
            `hpspell [name]` - This command returns an embed containing
            informationn on the [name] Harry Potter spell. Alternatively, pass
            "random" as the value for [name] to get a random spell.
          </li>
          <li>
            `http [status]` - This command accesses the HTTP Cat API and returns
            a cat photo for the given [status].
          </li>
          <li>
            `jobs [location?]` - This command generates a LinkedIn job search
            URL - the optional [location] parameter narrows down the search by
            the given location.
          </li>
          <li>`joke` - This command tells you a silly joke!</li>
          <li>
            `kick [@username] [reason?]` - This command requires that the user
            sending it has the "Kick Members" permission. If the permission is
            missing, the bot responds with a notice that the user lacks
            permission. Otherwise, the command kicks [@username] from the
            server. If the `log_channel` option is set, the bot will send an
            embed to that channel. The embed will contain the name of the user
            performing the kick, the name of the kicked user, and the reason
            provided. If no reason was provided, the embed will state that.
          </li>
          <li>
            `kirby` - This command sends a message to the channel the command
            came from. The message contains Kirby doing a little dance.
          </li>
          <li>
            `leave [server?]` - This command has a hard-coded restriction to
            only respond to my account (if you configure your own instance, you
            can change this). The command returns a list of servers the bot is a
            member of, and the server IDs. If you pass the ID as the parameter,
            the bot will leave that server.
          </li>
          <li>
            `level` - This command sends an embed containing the user's
            experience points and current level.
          </li>
          <li>
            `listen` - This command returns an embed containing information on
            the various `listener` type features the bot offers.
          </li>
          <li>
            `magic [cardname]` - This command querys the Magic: The Gathering
            API for cards that match [cardname]. The bot will send a message to
            the channel the message contains to confirm the command was received
            and the search was started. For each card it finds, the bot sends an
            embed containing the card information. The bot sends a notification
            after 30 seconds, when the search is complete. NOTE: The API can be
            slow to respond so this command may take some time.
          </li>
          <li>
            `maths [calculate|solve] [expression]` - This command takes the
            [expression] and evaluates it, returning the calculated result. If
            the expression is invalid, the bot will return an error. The user
            can select between `calculate` and `solve`. `calculate` will
            evaluate an expression, while `solve` will provide the steps for
            solving the equation.
          </li>
          <li>
            `motivate` - This command returns a motivational quote to raise your
            spirits. Quotes are obtained from freeCodeCamp.
          </li>
          <li>
            `ping` - This command will generate the latency for the bot. The bot
            will send a response back with the communication time in
            milliseconds.
          </li>
          <li>
            `pokename [name]` - This command querys the Pokemon API. If the bot
            finds a Pokemon that matches the name provided, it will send an
            embed containing the Pokemon's name, number, and image. If the bot
            cannot find a Pokemon, it will send a message notice.
          </li>
          <li>
            `pokenum [number]` - This command querys the Pokemon API. If the bot
            finds a Pokemon that matches the number provided, it will send an
            embed containing the Pokemon's name, number, and image. If no
            Pokemon is found, the bot will send a message notice. As an
            alternative, sending "random" instead of a number will cause the bot
            to return a random Pokemon.
          </li>
          <li>
            `profile [website] [username]` - This command will return a message
            embed containing a link to the profile for [username] on the
            [website]. Currently supported websites are: Steam, Facebook,
            Github, Twitter, LinkedIn, and Instagram. If an invalid website is
            sent, the bot will send a message notification stating the website
            is not available.
          </li>
          <li>
            `purge [number]` - This command will delete [number] messages from
            the channel the command is sent to. The bot will send a message to
            confirm deletion, then delete that message as well. If the user
            tries to delete more than 100 messages at once, the bot will refuse
            as Discord limitations currently prevent bots from deleting more
            than 100 messages at a time.
          </li>
          <li>
            `restrict [@username] [reason?]` This command requires that the user
            sending it has the "Kick Members" permission. If the permission is
            missing, the bot responds with a notice that the user lacks
            permission. Otherwise, the command will set the [@username]'s role
            provided in the `silence_role` option, and remove all other roles.
            If the role option is not set, the bot will send a message to notify
            the user. If the `log_channel` option is not set, the bot will send
            a message to notify the user. Otherwise, the bot will send an embed
            to the log channel. The embed will contain the name of the user
            performing the command, the name of the restricted user, and the
            reason provided. If no reason was provided, the embed will state
            that. The bot will then create a channel under the
            `silence_category` category (if `silence_category` is not set, the
            bot will send a message to notify the user), which only the channel
            moderators and the restricted user can access.
          </li>
          <li>
            `roll d[number]` - This command returns a random number between 1
            and [number], as if it was a dice roll.
          </li>
          <li>
            `search [query]` - This command returns a URL to the Google search
            results page for the given [query] word or words.
          </li>
          <li>`space` - This command gets NASA's Space Photo of the day.</li>
          <li>
            `star [@username] [reason?]` - This command sends a message embed to
            the [@username]'s direct messages. The embed contains the command
            author's name, the [reason] if provided, and a shiny gold star!
          </li>
          <li>
            `status` - This command returns a message embed containing
            information about the current server. The information includes the
            server name, creation date, the user's join date, the server owner,
            and the member count.
          </li>
          <li>
            `unrestrict [@username] [reason?]` - This command requires that the
            user sending it has the "Kick Members" permission. If the permission
            is missing, the bot responds with a notice that the user lacks
            permission. Otherwise, the command will remove the [@username]'s
            role provided in the `silence_role` option. If the role option is
            not set, the bot will send a message to notify the user. If the
            `log_channel` option is set, the bot will send an embed to that
            channel. The embed will contain the name of the user performing the
            command, the name of the unrestricted user, and the reason provided.
            If no reason was provided, the embed will state that.
          </li>
          <li>
            `uptime` - This command returns the amount of time the bot has
            currently been awake.
          </li>
          <li>
            `usage [command]` - This command returns a message embed for the
            [command]. The embed will contain the number of times the command is
            called.
          </li>
          <li>
            `user [@username]` - This command returns a message embed about
            [@username]. The embed contains their nickname, full username,
            account creation date, online status, date they joined the server,
            roles they have, and their avatar.
          </li>
          <li>
            `warn [@username] [reason?]` - This command requires that the user
            sending it has the "Kick Members" permission. If the permission is
            missing, the bot responds with a notice that the user lacks
            permission. Otherwise, the command will send a direct message to
            [@username] informing them that the command author has warned them,
            and providing the reason if given. If the `log_channel` option is
            set, the bot will send an embed to that channel. The embed will
            contain the name of the user performing the warning, the name of the
            warned user, and the reason provided. If no reason was provided, the
            embed will state that.
          </li>
          <li>
            `wiki [query]` - This command returns a link to the wikipedia
            article for [query]. If the article is not found, it returns the
            search page instead.
          </li>
          <li>
            `xkcd [?number]` - This command returns an embed containing today's
            XKCD comic. Optionally pass a comic [number] to get that specific
            comic instead.
          </li>
        </ul>
      </section>
      <section id="contributing">
        <h1>Contributing to the Bot</h1>
        <h2>Creating a PR</h2>
        <p>
          If you have an idea for a new feature or fix, you are more than
          welcome to create a pull request on the GitHub repository. The GitHub
          repository runs a couple of checks on all code submissions:
        </p>
        <ul>
          <li>
            `Travis CI` - Travis will check for linting issues on the code.
          </li>
          <li>
            `LGTM` - LGTM will verify that there are no errors or security
            concerns with the code.
          </li>
          <li>
            `FOSSA` - FOSSA will verify that the GPL-3.0 license (under which
            this bot is written) is compatible with all dependencies and
            external packages.
          </li>
        </ul>
        <p>
          Additionally, the `husky` package will run the lint and tests prior to
          each `git commit` command, which will help catch errors prior to the
          opening of a PR. To run these checks manually, the `npm run lint`
          command will lint the code, and the `npm run test` command will run
          the tests.
        </p>
      </section>
      <section id="trouble">
        <h1>Known Issues</h1>

        <div class="trouble-container">
          <h2>My bot won't connect!</h2>
          <p>
            Make sure you have properly set up the `.env` file to contain a
            `DISCORD_TOKEN` variable set to your bot's token.
          </p>
          <h2>I can't get my bot in my server</h2>
          <p>
            Make sure you are generating the invite link correctly, and that you
            have "Manage Server" permissions for the server you are trying to
            add the bot to.
          </p>
          <h2>My bot isn't doing a certain command!</h2>
          <p>
            Make sure your bot has the appropriate permissions in the server.
            For best results, set the bot to an Administrator.
          </p>
          <h2>Other Issues?</h2>
          <p>
            If you are having another issue, you can create a
            <a
              href="https://github.com/nhcarrigan/discord-bot"
              target="_blank"
              rel="noopener noreferrer"
              >bug report</a
            >
            or
            <a
              href="https://contact.nhcarrigan.com"
              target="_blank"
              rel="noopener noreferrer"
              >contact me directly</a
            >.
          </p>
        </div>
      </section>
    </main>

    <script src="main.js"></script>
  </body>
</html>
